import React from "react";
import { createPortal } from "react-dom";
import { useServerInsertedHTML } from "./ServerInject.js";
function addDataAttributeMarker(children, marker = "data-rwjs-head") {
  return React.Children.toArray(children).map((child, i) => {
    return React.cloneElement(child, {
      [marker]: true,
      key: `${marker}-` + i
    });
  });
}
const PortalHead = ({ children }) => {
  const isServerRendering = typeof window === "undefined";
  useServerInsertedHTML(() => {
    return addDataAttributeMarker(children);
  });
  const shouldPortal = React.useRef(
    isServerRendering ? false : document.readyState === "complete"
  );
  if (isServerRendering) {
    return null;
  } else {
    return shouldPortal.current ? createPortal(children, document.head) : null;
  }
};
var PortalHead_default = PortalHead;
export {
  PortalHead_default as default
};
