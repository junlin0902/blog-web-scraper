import {
  ensurePosixPath,
  getPaths,
  importStatementPath
} from "@redwoodjs/project-config";
import { getProject } from "@redwoodjs/structure/dist/index.js";
import { makeFilePath } from "../utils.js";
function getEntries() {
  const entries = {};
  const rwProject = getProject(getPaths().base);
  const routes = rwProject.getRouter().routes;
  const pages = routes.map((route) => route.page);
  for (const page of pages) {
    entries[page.constName] = ensurePosixPath(importStatementPath(page.path));
  }
  const serverEntry = getPaths().web.entryServer;
  if (!serverEntry) {
    throw new Error("Server Entry file not found");
  }
  entries["__rwjs__ServerEntry"] = serverEntry;
  entries["__rwjs__Routes"] = getPaths().web.routes;
  return entries;
}
async function getEntriesFromDist() {
  const entriesDist = getPaths().web.distRscEntries;
  const { serverEntries } = await import(makeFilePath(entriesDist));
  return serverEntries;
}
export {
  getEntries,
  getEntriesFromDist
};
